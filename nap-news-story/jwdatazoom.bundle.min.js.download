!function(){"use strict";function t(t,e){(null==t?void 0:t.debug)&&void 0!==window.console&&window.console.log("Datazoom/JW Player: ".concat(e))}var e,n={property:"",hasDependency:function(){return Object.prototype.hasOwnProperty.call(window,n.property)},waitFor:function(t,e){n.property=t,n.trigger().then((function(){n.hasDependency()&&e()})).catch((function(t){return console.error(t)}))},trigger:function(){return t=void 0,e=void 0,a=function(){var t,e;return function(t,e){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,c[0]&&(i=0)),i;)try{if(n=1,o&&(a=2&c[0]?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],o=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}}(this,(function(o){switch(o.label){case 0:t=Date.now()+2e4,o.label=1;case 1:if(n.hasDependency())return[3,6];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,new Promise((function(e,o){setTimeout(e,100),t<Date.now()&&o(new Error("Timeout error. window.".concat(n.property," is undefined")))}))];case 3:return o.sent(),[3,5];case 4:return e=o.sent(),console.error(e),[3,6];case 5:return[3,1];case 6:return[2]}}))},new((o=void 0)||(o=Promise))((function(n,r){function i(t){try{u(a.next(t))}catch(t){r(t)}}function c(t){try{u(a.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,c)}u((a=a.apply(t,e||[])).next())}));var t,e,o,a}},o=n,a=function(){return a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},a.apply(this,arguments)},r=e={value:{},get:function(){return e.value},set:function(t){e.value=t},update:function(t){var n=e.get();e.set(a(a({},n),t))}};function i(e){var n,a=window.jwDatazoomConfig;r.update(e),t(a,"datazoom metadata set -> ".concat(JSON.stringify(r.get()))),"function"==typeof(null===(n=null===window||void 0===window?void 0:window.datazoom)||void 0===n?void 0:n.setMetadata)?(t(a,"window.datazoom.setMetadata is a function."),window.datazoom.setMetadata(r.get()),t(a,"datazoom.setMetadata is now loaded - data sent.")):(t(a,"window.datazoom.setMetadata is not a function. Wait for dependency."),o.waitFor("datazoom",(function(){window.datazoom.setMetadata(r.get()),t(a,"datazoom.setMetadata is now loaded - data sent.")})),t(a,"datazoom.setMetadata is not a function"))}function c(t){void 0===t&&(t="");var e,n,o,a,r,i=t;return"embed"===t&&1===parseInt((e="is_amp",o=(n=window.location.href.replace(/(&amp;|&#038;)/g,"&")).substr(n.indexOf("?")+1),r="",(a=new URLSearchParams(o)).has(e)&&(r=a.get(e)),r),10)&&(i="amp"),i}var u,l,d=function(){return d=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},d.apply(this,arguments)};!function(){var e=window.jwDatazoomConfig,n=e.bu,o=e.pageId,a=e.pageType,r=e.hostname,u=e.primaryTag,l=e.customVariables;t(e,"jwDatazoomConfig -> ".concat(JSON.stringify(e)));var s,f,w={bu:n,customVariables:l,hostname:r,page_id:o,page_type:c(a),section:u,visitStartTime:(s=new Date,f=s.getTime()+60*s.getTimezoneOffset()*1e3,f?Math.round(f/1e3):0)},p=w.customVariables||{};delete w.customVariables,p&&0!==Object.keys(p).length?Object.values(p).forEach((function(n){t(e,"jwDatazoomConfig playerCustomVariable -> ".concat(JSON.stringify(n))),i(w=d(d({},w),n))})):(i(w),t(e,"jwDatazoomConfig -> ".concat(JSON.stringify(w))))}(),l=function(){var e=window.datazoom,n=window.jwDatazoomConfig,o=window.jwplayer,a=document.querySelectorAll('[id^="jw-player-"]');"function"==typeof(null==e?void 0:e.createContext)&&a.length&&a.forEach((function(a){var r,i;void 0!==(null==a?void 0:a.id)&&"nyp-video-player__video-container"===(null===(i=null===(r=document.getElementById(a.id))||void 0===r?void 0:r.parentElement)||void 0===i?void 0:i.className)&&(t(n,"creating Datazoom context for ".concat(a.id)),e.createContext(o(a.id)),o(a.id).on("float",(function(o){var a=document.querySelector(".jw-float-bar-icon");(null==o?void 0:o.floating)&&!(null==a?void 0:a.getAttribute("datazoom-event-click"))&&(null==a||a.addEventListener("click",(function(){try{null==e||e.generateEvent("Video Close Button Click",{floatingCloseBtn:"when user clicks the X button on a video"})}catch(e){t(n,"Error sending Datazoom event: ".concat(e))}})),null==a||a.setAttribute("datazoom-event-click","true"))})))}))},void 0!==window.jwplayer&&"function"==typeof(null===(u=null===window||void 0===window?void 0:window.datazoom)||void 0===u?void 0:u.createContext)?l():o.waitFor("jwplayer",(function(){o.waitFor("datazoom",l)}))}();
//# sourceMappingURL=jwdatazoom.bundle.min.js.map