!function(){"use strict";var e={property:"",hasDependency:function(){return Object.prototype.hasOwnProperty.call(window,e.property)},waitFor:function(t,n){e.property=t,e.trigger().then((function(){e.hasDependency()&&n()})).catch((function(e){return console.error(e)}))},trigger:function(){return t=void 0,n=void 0,i=function(){var t,n;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}}(this,(function(r){switch(r.label){case 0:t=Date.now()+2e4,r.label=1;case 1:if(e.hasDependency())return[3,6];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,new Promise((function(n,r){setTimeout(n,100),t<Date.now()&&r(new Error("Timeout error. window.".concat(e.property," is undefined")))}))];case 3:return r.sent(),[3,5];case 4:return n=r.sent(),console.error(n),[3,6];case 5:return[3,1];case 6:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function u(e){try{l(i.throw(e))}catch(e){o(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,u)}l((i=i.apply(t,n||[])).next())}));var t,n,r,i}},t=e,n=function(e){var t=window.nypScripts.isProduction;void 0!==t&&t||console.warn("Permutive error: ".concat(e))},r=function(e,t){var n=e/t*100;return Math.floor(n)},i=function(e){return t=void 0,r=void 0,o=function(){var t,r,i,o,a,u,l;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}}(this,(function(s){switch(s.label){case 0:if(!(t=null===(l=null==e?void 0:e.getPlaylistItem())||void 0===l?void 0:l.mediaid))return[2,null];r="/wp-json/nyp-video-player/jwplayer/v1/media/".concat(t),i={headers:{"Content-Type":"text/plain","X-Nypost-Rest-Auth":"videoplayer-permutive"}},s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(r,i)];case 2:return[4,(o=s.sent()).json()];case 3:if(a=s.sent(),!o.ok||a.errors)throw new Error("HTTP error: ".concat(o.status));return[2,a];case 4:return u=s.sent(),n(u),[2,null];case 5:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,n){function a(e){try{l(o.next(e))}catch(e){n(e)}}function u(e){try{l(o.throw(e))}catch(e){n(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,u)}l((o=o.apply(t,r||[])).next())}));var t,r,i,o},o=function(){var e,t=window.localStorage,n=t?JSON.parse(t.getItem("zephr")):null;return null!==n&&Boolean(null===(e=null==n?void 0:n.user)||void 0===e?void 0:e.sessionId)},a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},u=jwplayer.defaults,l=function(e){var t,n,i,l,s,d,c=e.player,p=e.videoMeta,v=e.postMeta,f=e.eventName,y=e.adItem,h=v.customProperties,m={auto_start:u.autostart||!1,play_id:u.pid||"",video:{created_at:(null==p?void 0:p.created)||null,custom_fields:(d=null===(t=null==p?void 0:p.metadata)||void 0===t?void 0:t.custom_params,d&&Object.entries(d).map((function(e){return{key:e[0],value:e[1]}}))||[]||[]),description:(null===(n=null==p?void 0:p.metadata)||void 0===n?void 0:n.description)||"",duration:(null==p?void 0:p.duration)||0,name:(null===(i=null==p?void 0:p.metadata)||void 0===i?void 0:i.title)||"",published_at:(null===(l=null==p?void 0:p.metadata)||void 0===l?void 0:l.publish_start_date)||null,tags:(null===(s=null==p?void 0:p.metadata)||void 0===s?void 0:s.tags)||[],video_id:(null==p?void 0:p.id)||""}};if("VideoLoad"===f)return m;if("VideoPlay"===f||"VideoProgress"===f){var w=m;if(w=a(a({},w),{factiva:{region_codes:[],regions:[],subject_codes:[],subjects:[]},type:(null==p?void 0:p.media_type)||"",video_player:{adview:0,playerformat:"",plid:u.pid||"",sub:""},series:{description:"",name:""},page:{channel:"",description_url:"",env:"",hl:"",id:"",iu:[],keywords:[],package:[],section:h.section||"",subchannel:"",subsection:"",type:"",url:"",usertype:""},subscriber:o()||!1,section:h.section||"",pageUri:h.pageUri||"",article:{authors:h.article.authors||[],id:h.article.id||"",keywords:h.article.keywords||[],page:h.pageUri||"",primaryTag:h.article.primaryTag||"",publish:h.article.publish||"",section:h.section||"",title:h.article.title||"",type:h.type||"",wordCount:h.article.wordCount||0},video:a(a({},w.video),{adcat:"",asset_date_path:"",author:(null==p?void 0:p.metadata.author)||"",column:"",content_status:(null==p?void 0:p.status)||"",cxense_keywords:[],description:(null==p?void 0:p.metadata.description)||"",duration:(null==p?void 0:p.duration)||0,formatted_duration:"".concat(Math.floor(null==p?void 0:p.duration)," seconds")||0,guid:"",keywords:[],keywords_omni:[],length:(null==p?void 0:p.duration.toString())||"0",link_url:(null==p?void 0:p.metadata.permalink)||"",lnid:"",omni_program_name:"",progress:r(c.getCurrentTime(),c.getDuration())||0,provider:c.getProvider().name||"",sponsored:"",state:c.getState()||"",sym:[],title:(null==p?void 0:p.metadata.title)||"",ttid:"",video_id:(null==p?void 0:p.id)||"",videoformat:"",watch_count:0})}),"VideoPlay"===f)return w;var g=a(a({},w),{seeked:c.seeked,video:a(a({},w.video),{length:parseInt(w.video.length,10),progress:w.video.progress}),progress:w.video.progress});return delete g.auto_start,g}if(y&&("VideoAdPlay"===f||"VideoAdClick"===f||"VideoAdProgress"===f)){var b=y.ima.ad.data,_={type:b.contentType||"",video_ad:{attribution_params:b.attributionParams.split(",")||[],deal_id:y.dealId||"",description:y.description||"",duration:y.duration||0,media_url:b.mediaUrl||"",pod_index:b.adPodInfo.podIndex||0,progress:r(y.position,y.duration)||0,skippable:b.skippable.toString()||"",title:b.title||"",total_ads:b.adPodInfo.totalAds||0,trafficking_parameters:b.traffickingParameters.split(",")||[],ui_elements:b.uiElements||[],vast_media_height:b.vastMediaHeight||0,vast_media_width:b.vastMediaWidth||0,vpaid:b.vpaid.toString()||""},ad:{ad_id:y.adId||"",ad_system:y.adsystem||"",advertiser_name:y.advertiser||"",creative_id:y.creativeAdId||"",deal_id:y.dealId||"",description:y.description||"",duration:y.duration||0,id:y.id||"",min_suggested_duration:b.minSuggestedDuration||0,pod_info:JSON.stringify(b.adPodInfo)||"",position:b.adPodInfo.adPosition||0,query_id:parseInt(b.adQueryId,10)||0,system:y.adsystem||"",title:b.title||"",universal_ad_id:JSON.stringify(b.universalAdIds)||"",universal_ad_id_registry:b.universalAdIdRegistry||""},play_id:m.play_id,ad_wrapper:{creative_ids:b.adWrapperCreativeIds||[],ids:b.adWrapperIds||[],systems:b.adWrapperSystems||[]},subscriber:o()||!1,section:h.section||"",pageUri:h.pageUri||"",article:{authors:h.article.authors||[],keywords:h.article.keywords||[],primaryTag:h.article.primaryTag||"",publish:h.article.publish||"",title:h.article.title||"",wordCount:h.article.wordCount||0},video:a(a({},m.video),{keywords:[],length:Math.floor(null==p?void 0:p.duration)||0,progress:r(c.getCurrentTime(),c.getDuration())||0,title:(null==p?void 0:p.metadata.title)||"",watch_count:0})};if("VideoAdPlay"===f||"VideoAdClick"===f)return _;var k=_;return a(a({},k),{progress:k.video_ad.progress})}throw new Error("Unable to create tracking data.")},s=[{value:0,sent:!1},{value:.25,sent:!1},{value:.5,sent:!1},{value:.75,sent:!1},{value:.95,sent:!1}],d={_state:JSON.parse(JSON.stringify(s)),get state(){return this._state},updateState:function(e,t){this._state[e].sent=t},resetState:function(){this._state=JSON.parse(JSON.stringify(s))}},c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},p=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function u(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}l((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}};(window.jwplayerPluginJsonp||window.jwplayer().registerPlugin)("jwpermutive.bundle.min","8.0",(function(e,r){return p(void 0,void 0,void 0,(function(){var o,a;return v(this,(function(u){return o=function(){return p(void 0,void 0,void 0,(function(){var t,n;return v(this,(function(r){switch(r.label){case 0:t=20,n=0,r.label=1;case 1:return!e.getPlaylistItem()&&n<t?(n+=1,[4,new Promise((function(e){return setTimeout(e,250)}))]):[3,3];case 2:return r.sent(),[3,1];case 3:return[2,e]}}))}))},a=function(){return p(void 0,void 0,void 0,(function(){var t,a,u,s,f,y,h,m,w,g;return v(this,(function(b){switch(b.label){case 0:return t=window.permutive,a=function(){return p(void 0,void 0,void 0,(function(){var e;return v(this,(function(t){switch(t.label){case 0:return[4,o()];case 1:return e=t.sent(),[4,i(e)];case 2:return[2,t.sent()]}}))}))},[4,a()];case 1:u=b.sent(),s=l({player:e,videoMeta:u,postMeta:r,eventName:"VideoLoad"});try{null==t||t.track("VideoLoad",s)}catch(e){n(e)}return e.on("play",(function(){return p(void 0,void 0,void 0,(function(){var i;return v(this,(function(o){switch(o.label){case 0:return[4,a()];case 1:u=o.sent(),i=l({player:e,videoMeta:u,postMeta:r,eventName:"VideoPlay"});try{null==t||t.track("VideoPlay",i)}catch(e){n(e)}return[2]}}))}))})),f=!1,y=!1,h=function(i,o,a){var s=o.position,p=o.duration;o.seeked&&(y=!0),f||"number"!=typeof p||"number"!=typeof s||d.state.forEach((function(o,v){var h;if(s/p>o.value&&!1===o.sent){var m=l({player:c(c({},e),{seeked:y}),videoMeta:u,postMeta:r,eventName:i,adItem:null!==(h=c(c({},a),{position:s}))&&void 0!==h?h:null});try{null==t||t.track(i,m),d.updateState(v,!0)}catch(e){n(e)}finally{f=!0,setTimeout((function(){f=!1,y=!1}),1e3)}}}))},e.on("time",(function(e){g=e,h("VideoProgress",e)})),e.on("seek",(function(){h("VideoProgress",c(c({},g),{seeked:!0}))})),e.on("complete",(function(){d.resetState()})),e.on("nextClick",(function(){d.resetState()})),e.on("adItem",(function(i){m=i;var o=l({player:e,videoMeta:u,postMeta:r,eventName:"VideoAdPlay",adItem:i});try{null==t||t.track("VideoAdPlay",o)}catch(e){n(e)}})),e.on("adTime",(function(e){w=e,h("VideoAdProgress",e,m)})),e.on("adClick",(function(){var i=l({player:e,videoMeta:u,postMeta:r,eventName:"VideoAdClick",adItem:c(c({},m),{position:w.position})});try{null==t||t.track("VideoAdClick",i)}catch(e){n(e)}})),e.on("adComplete",(function(){d.resetState()})),[2]}}))}))},e.on("ready",(function(){var e;"function"==typeof(null===(e=window.permutive)||void 0===e?void 0:e.track)?a():t.waitFor("permutive",a)})),[2]}))}))}))}();
//# sourceMappingURL=jwpermutive.bundle.min.js.map